<!DOCTYPE html>
<html lang="ch">

<!--${My_unichem_head}-->
<head>
    <meta charset="UTF-8">
    <title>${HopeTag.PageTitle}</title>
    <link href="${HopeTag.InstallDir}Skin/video-js.css" rel="stylesheet">
    <link rel="icon" href="${HopeTag.InstallDir}Skin/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="${HopeTag.InstallDir}Skin/favicon.ico" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    ${HopeTag.MetaKeywords}
    <link rel="stylesheet" type="text/css" href="${HopeTag.InstallDir}Skin/collegeChem_20180801.css">
    <link rel="stylesheet" type="text/css" href="${HopeTag.InstallDir}Skin/share.css">
</head>
<body>

    <!--${My_unichem_header}-->
    <div class="header">
        <div class="container">
            <a class="logo" href="${HopeTag.InstallDir}"></a>
            <a class="navList" onclick="dropDown()"></a>
        </div>
    </div>

    <!--${My_unichem_nav}-->
    <div class="nav" id="nav">
        <div class="return"><a  onclick="closeNav()"></a></div>
        <div class="container">
            <ul>
                <li><a href="${HopeTag.InstallDir}" title="首页" class="navItem">首页</a><a href="${HopeTag.GetCategoryLink($id)}" class="rightArr"> > </a></li>
                #foreach($id in [1,10,3,4,5,6,7,8])
                #set($Cat = ${HopeTag.GetCategoryName($id)})
                #set($Cata = ${HopeTag.Category})
                <li><a href="${HopeTag.GetCategoryLink($id)}" title="$Cat"
                       #if($Cat==$Cata.Name)
                       class="navItem active"
                       #else
                       class="navItem"
                       #end
                > $Cat</a><a href="${HopeTag.GetCategoryLink($id)}" class="rightArr"> > </a></li>
                #end
            </ul>
        </div>
    </div>


    <!--${My_unichem_slider}-->
    <div class="slider" id="slider1">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><a title=""><img class="swiperPic" src="${HopeTag.InstallDir}Skin/images/slider/slider.jpg"></a></div>
                <div class="swiper-slide"><a title=""><img class="swiperPic" src="${HopeTag.InstallDir}Skin/images/slider/slider.jpg"></a></div>
                <div class="swiper-slide"><a title=""><img class="swiperPic" src="${HopeTag.InstallDir}Skin/images/slider/slider.jpg"></a></div>
                <div class="swiper-slide"><a title=""><img class="swiperPic" src="${HopeTag.InstallDir}Skin/images/slider/slider.jpg"></a></div>
            </div>
            <div class="pagination"></div>
        </div>
    </div>
    <script src="${HopeTag.InstallDir}JS/idangerous.swiper.min.js"></script>
    <script>
        var mySwiper = new Swiper('.swiper-container',{
            loop: true,
            autoplay: 3000,
            calculateHeight:true,
            pagination:'.pagination',
            paginationClickable: true,
        });
        var swiperPic = document.getElementsByClassName("swiperPic");
        var PC = window.matchMedia("(min-width:769px)");
        var swiper = document.getElementsByClassName("swiper-slide");
        if(window.innerWidth<=769){
            for(var i=0;i<swiperPic.length;i++){
                swiper[i].style.height='window.innerWidth/750*400 !important';
                swiperPic[i].src="${HopeTag.InstallDir}Skin/images/slider/slider-mobile.jpg";
            }
        }else{
            for(var i=0;i<swiperPic.length;i++){
                swiper[i].style.height='window.innerWidth/1920*450 !important';
            }
        }
        window.onresize =()=>{
            var width=window.innerWidth;

            if(PC.matches) {
                for(var i=0;i<swiperPic.length;i++){
                    swiper[i].style.height='window.innerWidth/1920*450 !important';
                    swiperPic[i].src="${HopeTag.InstallDir}Skin/images/slider/slider.jpg";
                }
            }else{
                for(var i=0;i<swiperPic.length;i++){
                    swiper[i].style.height='window.innerWidth/750*400 !important';
                    swiperPic[i].src="${HopeTag.InstallDir}Skin/images/slider/slider-mobile.jpg";
                }
            }
        }
    </script>


    <!--index-->
    <!--intro-->
    <div class="intro">
        <div class="title">${HopeTag.GetCategoryName(1)}</div>
        #set($Intro = ${HopeTag.GetCategory(1)})
        <div class="container">
            <div class="cover">
                <img src="${HopeTag.InstallDir}$Intro.NodePicPath" alt="$Intro.Name">
            </div>
            <div class="course">
                #set( $intro_text =${HopeTag.Html2Txt($Intro.Content)} )
                $intro_text
                <div class="more"><a href="${HopeTag.GetCategoryLink(18)}" title="详情"> 详情></a></div>
            </div>
        </div>
    </div>
    <!--teach-->
    <div class="teach">
        <div class="title">${HopeTag.GetCategoryName(3)}</div>
        <div class="container">
            <ul>
                #foreach($Art in ${HopeTag.ArticleListSource(3,false,16)})
                <li><a href="${HopeTag.GetCategoryLink($Art.NodeID)}" title="$Art.Title"> $Art.Title</a></li>
                #end
            </ul>
        </div>
    </div>
    <!--sci-->
    <div class="sci">
        <div class="title">${HopeTag.GetCategoryName(5)}</div>
        <div class="container">
            #foreach($News in ${HopeTag.ArticleListSource(5,false,3)})
            <div class="news">
                <div class="date">
                    #set($date = ${HopeTag.GetValue("UpdateTime",$News)})

                    <div class="day">
                        ${HopeTag.FormatDateTime($date,"dd")}
                    </div>
                    <div class="yearM">
                        ${HopeTag.FormatDateTime($date,"yyyy/MM")}
                    </div>
                </div>
                <div class="text">
                    <div class="newsTitle">
                        <a href="${HopeTag.GetCategoryLink($News.NodeID)}" title="$News.Title">${HopeTag.FormatString($News.Title, 30)}</a>
                    </div>
                    <div class="newsCon">
                        #set( $htm = ${HopeTag.GetValue("Content",$News)})
                        #set( $text =${HopeTag.Html2Txt($htm)} )
                        <a href="${HopeTag.GetCategoryLink($News.NodeID)}" title="$News.Title" class="newsCons">$text</a>
                    </div>
                </div>
            </div>
            #end
            <div class="clear"></div>
            <div class="more">
                <a href="" title="更多"> 更多></a>
            </div>
        </div>
    </div>

    <script src="${HopeTag.InstallDir}JS/clamp.min.js"></script>
    <script>
        var para = document.getElementsByClassName('newsCons');
        for(let i = 0;i<para.length;i++){
            $clamp(para[i], {clamp: 'auto',useNativeClamp: true,truncationChar:"...",animate:true});
        }
    </script>


    <!--${My_unichem_footer}-->
    <div class="footer">
        <div class="container">
            <div class="list">
                <div class="listTitle">
                    <img src="${HopeTag.InstallDir}Skin/icon/quick.png">
                    快速通道
                </div>
                <ul>
                    #foreach($id in [1,10,4,6,8])
                    <li><a href="${HopeTag.GetCategoryLink($id)}" title="${HopeTag.GetCategoryName($id)}"> ${HopeTag.GetCategoryName($id)}</a></li>
                    #end
                </ul>
            </div>
            <div class="list">
                <div class="listTitle">
                    <img src="${HopeTag.InstallDir}Skin/icon/learn.png">
                    学习资源
                </div>
                <ul>
                    <li><a href="http://ce.sysu.edu.cn/echemi/oc/" target="_Blank" title="有机化学">有机化学</a></li>
                    <li><a href="http://ce.sysu.edu.cn/echemi/modernlab/" target="_Blank" title="现代化学实验与技术">现代化学实验与技术</a></li>
                    <li><a href="http://ce.sysu.edu.cn/inorganic/" target="_Blank" title="无机化学">无机化学</a></li>
                    <li><a href="http://ce.sysu.edu.cn/echemi/comlab/" target="_Blank" title="综合化学实验">综合化学实验</a></li>
                    <li><a href="http://ce.sysu.edu.cn/Echemi/innovatechemi/html/edures_flash.htm" target="_Blank" title="高等化学教学资源库">高等化学教学资源库</a></li>
                </ul>
            </div>
            <div class="list">
                <div class="listTitle">
                    <img src="${HopeTag.InstallDir}Skin/icon/link.png">
                    常用链接
                </div>
                <ul>
                    <li><a href="http://www.sysu.edu.cn/" target="_Blank" title="中山大学">中山大学</a></li>
                    <li><a href="http://ce.sysu.edu.cn/" target="_Blank" title="化学学院">化学学院</a></li>
                    <li><a href="http://uems.sysu.edu.cn/jwxt/" target="_Blank" title="教务系统">教务系统</a></li>
                    <li><a href="http://ge.sysu.edu.cn" target="_Blank" title="通识教育部<">通识教育部</a></li>
                    <li><a href="http://my.sysu.edu.cn/welcome" target="_Blank" title="我的中大">我的中大</a></li>
                </ul>
            </div>
            <div class="list">
                <div class="listTitle">
                    <img src="${HopeTag.InstallDir}Skin/icon/contact.png">
                    联系我们
                </div>
                <ul>
                    <li>电话：<a  title="电话">020-84113691</a></li>
                    <li>传真：<a  title="传真">020-84112245</a></li>
                    <li>邮箱：<a  title="邮箱">chem@mail.sysu.edu.cn</a></li>
                    <li>邮编：<a  title="邮编">510275</a></li>
                    <li>地址：<a  title="地址">广州市海珠区新港西路135号</a></li>
                </ul>
            </div>
        </div>
        <div class="bottom">
            Copyright © 2018 中山大学化学学院
        </div>
    </div>
    <script src="${HopeTag.InstallDir}JS/main.js"></script>

    <!--${My_unichem_banner}-->
    #set($Cat = ${HopeTag.Category})
    <div class="banner">
        <img src="${HopeTag.InstallDir}Skin/images/banner/${Cat.NodePath}.jpg" alt="$Cat.Name" class="bannerPC">
        <img src="${HopeTag.InstallDir}Skin/images/banner/${Cat.NodePath}-mobile.jpg" alt="$Cat.Name" class="bannerMo">
    </div>

    <!--${My_unichem_catalog}-->
    #if(${HopeTag.CategoryArticleNum}>0)
    <div class="catalog container">
        #set($Cat=${HopeTag.CurrentCategoryID})
        <ul class="cata">
            #foreach($Art in ${HopeTag.ArticlePageSource($Cat,false,20)})
            <li>
                <a class="catName" href="${HopeTag.GetItemLink($Art.GeneralID)}" title="$Art.Title">$Art.Title</a>
                <a class="catDate">${HopeTag.FormatDateTime($Art.UpdateTime)}</a>
            </li>
            #end
        </ul>
        ${HopeTag.Pager()}
    </div>
    #else
    <div class="empty container">
        暂时无更多内容
    </div>
    #end

    <!--${My_unichem_content}-->
    <div class="content">
        <div class="container">
            #set($Art=${HopeTag.Article})
            <div class="conTitle">
                $Art.Title
            </div>
            <div class="conInfo">
                #set($Date=$Art.UpdateTime)
                日期：${HopeTag.FormatDateTime($Date,"yyyy年MM月dd日")} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;来源：${HopeTag.getValue("Author",$Art)}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;点击数：$Art.Hits
            </div>
            <div class="conArt">
                ${HopeTag.getValue("Content",$Art)}
            </div>
        </div>
    </div>
        <script src="${HopeTag.InstallDir}JS/jquery-3.3.1.min.js"></script>
        <script src="${HopeTag.InstallDir}JS/share.js"></script>


    <!--${My_unichem_teach}-->
    #if(${HopeTag.CategoryArticleNum}>0)
    <div class="teach_list">
        <div class=" container">
            <ul class="teach_item">
                #set($Cat=${HopeTag.CurrentCategoryID})
                #if( ${HopeTag.ArticlePageSource($Cat,false,20)})
                #foreach($Art in ${HopeTag.ArticlePageSource($Cat,false,20)})
                <li>
                    <div>
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}"><img src="$Art.DefaultPicUrl"></a>
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}" class="teach_title">$Art.Title</a>
                        #set($Con=${HopeTag.GetValue("Content",$Art)})
                        #set( $text =${HopeTag.Html2Txt($Con)} )
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}"  class="teach_con">$text</a>
                    </div>
                </li>
                #end
            </ul>
        </div>
        ${HopeTag.Pager()}
        #end
    </div>
    #else
    <div class="empty container">
        暂时无更多内容
    </div>
    #end
    <script src="${HopeTag.InstallDir}JS/clamp.min.js"></script>
    <script>
        var para = document.getElementsByClassName('teach_con');
        for(let i = 0;i<para.length;i++){
            $clamp(para[i], {clamp: 'auto',useNativeClamp: true,truncationChar:"...",animate:true});
        }
    </script>

    <!--${My_unichem_list}-->
    #if(${HopeTag.CategoryArticleNum}>0)
    <div class="team_list">
        <div class="container">
            <ul class="team_item">
                #set($Cat=${HopeTag.CurrentCategoryID})
                #if(${HopeTag.ArticlePageSource($Cat,false,20)})
                #foreach($Art in ${HopeTag.ArticlePageSource($Cat,false,20)})
                <li>
                    <div>
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}" class="team_head" title="$Art.Title"><img src="$Art.DefaultPicUrl" alt="$Art.Title"></a>
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}" class="team_name" title="$Art.Title">$Art.Title</a>
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}" class="team_posi">${HopeTag.GetValue("Position",$Art)}</a>
                        #set($Con=${HopeTag.GetValue("detail",$Art)})
                        <a href="${HopeTag.GetItemLink($Art.GeneralID)}" class="team_desc" title="$Art.Title">$Con</a>
                    </div>
                </li>
                #end
            </ul>
        </div>
        ${HopeTag.Pager()}
        #end
    </div>
    #else
    <div class="empty container">
        暂时无更多内容
    </div>
    #end
    <script src="${HopeTag.InstallDir}JS/clamp.min.js"></script>
    <script>
        var para = document.getElementsByClassName('team_desc');
        for(let i = 0;i<para.length;i++){
            $clamp(para[i], {clamp: 'auto',useNativeClamp: true,truncationChar:"...",animate:true});
        }
    </script>

    <!--${My_unichem_video}-->
    #if(${HopeTag.CategoryArticleNum}>0)
    <div class="video_list">
        <div class="container">
            <ul class="video_item">
                #set($Cat=${HopeTag.CurrentCategoryID})
                #if(${HopeTag.ArticlePageSource($Cat,false,20)})
                #foreach($Art in ${HopeTag.ArticlePageSource($Cat,false,20)})
                <li>
                    <div onclick="window.open('${HopeTag.GetItemLink($Art.GeneralID)}','_self')">
                        <a class="video_play" title="$Art.Title">
                            <img class="play" src="${HopeTag.InstallDir}Skin/icon/video_0.png">
                            <img class="played" src="${HopeTag.InstallDir}Skin/icon/video.png">
                            <img src="$Art.DefaultPicUrl" alt="$Art.Title">
                        </a>
                        <a class="video_name"  title="$Art.Title">$Art.Title</a>
                        #set($Con=${HopeTag.GetValue("Content",$Art)})
                    </div>
                </li>
                #end
            </ul>
        </div>
        ${HopeTag.Pager()}
        #end
    </div>
    #else
    <div class="empty container">
        暂时无更多内容
    </div>
    #end
    <script src="${HopeTag.InstallDir}JS/clamp.min.js"></script>
    <script>
        var para = document.getElementsByClassName('video_desc');
        for(let i = 0;i<para.length;i++){
            $clamp(para[i], {clamp: 'auto',useNativeClamp: true,truncationChar:"...",animate:true});
        }
    </script>

<!--${My_unichem_breadcrumb}-->
    <div class="bread">
        <div class="container" id="bread">
            <img src="${HopeTag.InstallDir}Skin/icon/loca.png">
            ${HopeTag.Breadcrumb(1,0)}
        </div>
    </div>

<!---->
    <div class="content">
        <div class="container">
            #set($Art=${HopeTag.Article})
            <div class="conTitle">
                $Art.Title
            </div>
            <div class="conInfo">
                #set($Date=$Art.UpdateTime)
                日期：${HopeTag.FormatDateTime($Date,"yyyy年MM月dd日")} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;来源：${HopeTag.getValue("Author",$Art)}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;点击数：$Art.Hits
            </div>
            #set($vid = ${HopeTag.GetValue("Attach",$Art)})
            #set($list=${HopeTag.AnnexListSource("Attach",$Art)})
            #foreach($a in $list)
            #set($b=$a.url)
            #end
            #if($b=="")
            <video id="my-video" class="video-js vjs-default-skin vjs-big-play-centered vjs-fluid" controls preload="auto" data-setup="{}">
                <source src="$b" type="video/mp4">
                <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank" class="vjs-hidden" hidden="hidden">supports HTML5 video</a></p>
            </video>
            #else
            <div class="empty container">
            </div>
            #end
        </div>
    </div>
    <script src="${HopeTag.InstallDir}JS/video.js"></script>

    <!---->
    <div class="content">
        <div class="container">
            #set($Art=${HopeTag.Article})
            <div class="conTitle">
                $Art.Title
            </div>
            <div class="conInfo">
                #set($Date=$Art.UpdateTime)
                日期：${HopeTag.FormatDateTime($Date,"yyyy年MM月dd日")} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;来源：${HopeTag.getValue("Author",$Art)}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;点击数：$Art.Hits
            </div>
            <div class="conPDF">
                <script src="/JS/pdf.js/build/pdf.js"></script>
                <div class="wrapper" id="pdf-container">
                </div>
            </div>
        </div>
    </div>
        #set($list=${HopeTag.AnnexListSource("Attach",$Art)})
        #foreach($a in $list)
        #set($b=$a.url)
        #end
        <script src="${HopeTag.InstallDir}JS/jquery-3.3.1.min.js"></script>
        <script>
            //程序只能在服务器上运行
            window.onload = function () {
                //创建
                function createPdfContainer(id,className) {
                    var pdfContainer = document.getElementById('pdf-container');
                    var canvasNew =document.createElement('canvas');
                    canvasNew.id = id;
                    canvasNew.className = className;
                    pdfContainer.appendChild(canvasNew);
                };
                //渲染pdf
                //建议给定pdf宽度
                function renderPDF(pdf,i,id) {
                    pdf.getPage(i).then(function(page) {
                        if (window.innerWidth>1000){
                            var scale=1;
                        }else if(window.innerWidth>700){
                            var scale=0.7;
                        }else{
                            var scale=0.3;
                        }
                        var viewport = page.getViewport(scale);
                        //  准备用于渲染的 canvas 元素
                        var canvas = document.getElementById(id);
                        var context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        // 将 PDF 页面渲染到 canvas 上下文中
                        var renderContext = {
                            canvasContext: context,
                            viewport: viewport
                        };
                        page.render(renderContext);
                    });
                };
                //创建和pdf页数等同的canvas数
                function createSeriesCanvas(num,template) {
                    var id = '';
                    for(var j = 1; j <= num; j++){
                        id = template + j;
                        createPdfContainer(id,'pdfClass');
                    }
                }
                //读取pdf文件，并加载到页面中
                function loadPDF(fileURL) {
                    PDFJS.getDocument(fileURL).then(function(pdf) {
                        //用 promise 获取页面
                        var id = '';
                        var idTemplate = 'cw-pdf-';
                        var pageNum = pdf.numPages;
                        //根据页码创建画布
                        createSeriesCanvas(pageNum,idTemplate);
                        //将pdf渲染到画布上去
                        for (var i = 1; i <= pageNum; i++) {
                            id = idTemplate + i;
                            renderPDF(pdf,i,id);
                        }
                    });
                }
                //如果在本地运行，需要从服务器获取pdf文件
                loadPDF('$b');
            };
        </script>
</body>
</html>